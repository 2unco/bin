<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>String Art</title>

    <link rel="stylesheet" href="main.css"/>
  </head>
  <body>
    <div id="loading">Loading...</div>
    <div id="app"></div>

    <script type="text/x-template" id="art-view-template">
<div class="art-view" v-if="show">
  <div class="canvases" ref="canvas-container">
    <canvas class="canvas-original" ref="canvas-original"></canvas>
    <canvas class="canvas-art" ref="canvas-art"></canvas>
    <canvas class="canvas-nails" ref="canvas-nails"></canvas>
  </div>

  <p>
    Tap/hover over the preview to switch between the result and the original.
  </p>
</div>
    </script>

    <script type="text/x-template" id="app-template">
<div class="wrap">
  <div v-if="step === 'config'" class="step">
    <aside>
      <h1>Config</h1>

      <p>
        Be careful not to use a large image as a large amount of processing is required. Try resizing your image to 512 pixels (on the largest dimension).
      </p>

      <form @submit.prevent="doPreview">
        <p>
          <label>
            Image:
            <input @change="imageChanged" type="file" accept="image/*"/>
          </label>
        </p>
        <p>
          <label>
            Width (cm):
            <input v-model="width" type="number" min="0"/>
            Height: {{ height ? height : '...' }}
          </label>
        </p>
        <p>
          Number of nails:
          <input v-model="nails" type="number" min="8" step="4"/>
        </p>
        <p>
          String to use (m):
          <input v-model="strqty" type="number" min="0"/>
        </p>

        <p>
          <button type="submit">Update preview</button>
        </p>

        <p v-if="loading">
          Processing preview...
        </p>
      </form>
    </aside>
    <div>
      <h1>Preview</h1>

      <art-view
        ref="art-view"
        :image="image"
        :width="width"
        :height="height"
        :nails="nails"
        :strqty="strqty"
        type="preview"
      ></art-view>

      <p>
        <button
          @click="step = 'print'"
          :disabled="!(image && width && nails && strqty)"
        >Proceed</button>
      </p>
    </div>
  </div>
  <div v-else-if="step === 'print'" class="step">
    <p>
      Coming soon...
    </p>

    <!--
    <div>
      <h1>Print</h1>

      <p>
        Press <kbd>Ctrl+P</kbd> to print out the nail template.
      </p>
      <p>
        Connect the sheets together on your canvas so that the nail numbers are
        continuous around the canvas' edge.
      </p>
      <p>
        Carefully hammer your nails, then continue.
      </p>
    </div>
    <div>
      <h1>Speech</h1>

      <p>
        If you'd like to be verbally instructed then press this button and listen
        for a response. (It probably won't work if you don't hear anything here.)
      </p>
      <p>
        <button @click="prepareSpeech">Use/Test Speech</button>
      </p>

      <p>
        <button @click="step = 'stringing-time'">Proceed</button>
      </p>
    </div>
    -->
  </div>
  <div v-else-if="step === 'stringing-time'" class="step">
  </div>
</div>
    </script>

    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <script src="main.js"></script>
  </body>
</html>
